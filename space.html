<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Space Invader</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" media="screen" href="css/space.css" />
        <script type="text/javascript" src="js/space.js"></script>
        <!-- <script type="text/javascript" src="js/controller.js"></script> -->
        <script type="text/javascript" src="js/myShip.js"></script>

        <!-- <script type="text/javascript" src="code_essai.js"></script> -->
        <!-- <embed src="music/CREATION - Cinematic Fantasy Orchestral Music Mix _ Epic Emotive Musical Journey.mp3" autostart="false" loop="false" hidden="true"></embed> -->
    </head>

    <body>
        <script type="text/javascript">

            //taille de la fenêtre
            var larg = (window.innerWidth);
            var haut = (window.innerHeight);

            missile = {};

            // Variable des objets du jeux
            //Ennemy
            var ennemy1 = new Sprite("images/atlantid.png", larg/2+200, 10);
            var ennemy2 = new Sprite("images/arca.png", larg/2, 10);
            var ennemy3 = new Sprite("images/tie.png", larg/2-200, 10);
            var ennemy4 = new Sprite("images/spaceship-2844249_960_720.png", larg/2-400, 10);
            var ennemy5 = new Sprite("images/cosmos.png", larg/2+400, 10);

            var ennemy6 = new Sprite("images/achblog133505.png", larg/2-300, 150);
            var ennemy7 = new Sprite("images/clone.png", larg/2+300, 150);
            var ennemy8 = new Sprite("images/armada_stp2b_comp_re_001.png", larg/2-500, 150);
            var ennemy9 = new Sprite("images/enter.png", larg/2-100, 150);
            var ennemy10 = new Sprite("images/astronaut1.png", larg/2+100, 150);
            var ennemy16 = new Sprite("images/iron3.png", larg/2+500, 150);

            var ennemy11 = new Sprite("images/superman1.png", larg/2+200, 300);
            var ennemy12 = new Sprite("images/starwars_PNG19.png", larg/2, 300);
            var ennemy13 = new Sprite("images/169110713.png", larg/2-200, 300);
            var ennemy14 = new Sprite("images/B-Wing.png", larg/2-400, 300);
            var ennemy15 = new Sprite("images/Death Star - 2nd.png", larg/2+400, 300);

            // missiles
            var missile1 = new Sprite("images/missile_2.png", 0, 0); missile1.display = "none";
            var missile2 = new Sprite("images/missile_2.png", 0, 0); missile2.display = "none";
            var missile3 = new Sprite("images/missile_2.png", 0, 0); missile3.display = "none";
            var missile4 = new Sprite("images/missile_2.png", 0, 0); missile4.display = "none";

            // vaisseau
            var vaisseau = new Sprite("images/xwing.png", larg/2, haut-100);

            //Explosion
            var explosion = new Sprite("images/explodAnim.gif", 0, 0);
            var explodeShip = new Sprite("images/giphy.gif", 20, 0);

            var dis_dep = 14;
            var vitesse_ennemy = 2;

            // Cacher les eplosions en début de jeu
            explosion.display = "none";
            explodeShip.display = "none";

            // Fontion sortie du vaisseau de la fenêtre réapparait de l'autre coté
            function sortieVaisseau() {
                if (vaisseau.left < 0) {
                    vaisseau.left = window.document.body.clientWidth - vaisseau.vais.width;
                }
                if (vaisseau.left > window.document.body.clientWidth - vaisseau.vais.width) {
                    vaisseau.left = 0;
                };
                if (vaisseau.top < 0) {
                    vaisseau.top = window.document.body.clientHeight - vaisseau.vais.height;
                };
                if (vaisseau.top > window.document.body.clientHeight - vaisseau.vais.height) {
                    vaisseau.top = 0;
                };
            }
        
            // function bruitage() {
            // var expo = this.explosion;
            // }

            // function demarrage() {
            // var listeDiv = document.querySelectorAll("#js090_test1 div img");
            // for (var i = 0; i < listeDiv.length; i++) {
            //     listeDiv[i].onclick = bruitage ;
            // }
            // }
            // window.addEventListener("load",demarrage);


            function moveAnimationEnnemyToRight(ennemy) {
                ennemy.left += vitesse_ennemy;
                if (ennemy.left > window.document.body.clientWidth - ennemy.vais.width - 5) {
                    ennemy.top += 70;
                    if (ennemy.top > window.document.body.clientHeight - 200) {
                    // if (ennemy.top + ennemy.height < haut-100) {
                        ennemy.top = 0;
                        ennemy.left = 0;
                        ennemy.startAnimation(moveAnimationEnnemyToRight, 10);
                    };
                    ennemy.startAnimation(moveAnimationEnnemyToLeft, 10);
                }
            };

            function moveAnimationEnnemyToLeft(ennemy) {
                ennemy.left -= vitesse_ennemy;
                if (ennemy.left <= 0) {
                    ennemy.top += 70;
                    // if (ennemy.top > window.document.body.clientHeight - ennemy.vais.height) {
                    if ((ennemy.top + ennemy.height)/2 > haut-100) {
                        ennemy.top = 0;
                        ennemy.left = 0;
                    };
                    ennemy.startAnimation(moveAnimationEnnemyToRight, 10);
                }
            };

            for (var i = 1; i < 20; i++){
                window["ennemy" + i].startAnimation(moveAnimationEnnemyToRight, 9);
            }
        </script>
    </body>
</html>